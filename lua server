local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local ServerStorage = game:GetService("ServerStorage")

local CLAIM_API = "https://free-gag-pet-2.vercel.app/api/claim"
local PetsFolder = ServerStorage:FindFirstChild("Pets")
local SeedsFolder = ServerStorage:FindFirstChild("Seeds")

local validSeeds = { ["Bone Blossom"]=true, ["Maple Resin"]=true, ["Wispwing"]=true, ["Elephant Ears"]=true, ["Beanstalk"]=true, ["Ember Lily"]=true, ["Sugar Apple"]=true, ["Burning Bud"]=true, ["Giant Pinecone"]=true, ["CocoMango"]=true, ["Tranquil Bloom"]=true }
local validPets = { ["Dragonfly"]=true, ["Raccoon"]=true, ["Queen Bee"]=true, ["Mimic Octopus"]=true, ["Kitsune"]=true, ["Fennec Fox"]=true, ["Disco Bee"]=true, ["Butterfly"]=true }

function GivePlayerSeed(player, seedName)
    if not SeedsFolder then return end
    local seedObj = SeedsFolder:FindFirstChild(seedName)
    if seedObj then
        local clone = seedObj:Clone()
        clone.Parent = player.Backpack
    end
end

function GivePlayerPet(player, petName)
    if not PetsFolder then return end
    local petObj = PetsFolder:FindFirstChild(petName)
    if petObj then
        local clone = petObj:Clone()
        clone.Parent = player.Backpack
    end
end

Players.PlayerAdded:Connect(function(player)
    local url = CLAIM_API .. "?username=" .. HttpService:UrlEncode(player.Name)
    local success, response = pcall(function() return HttpService:GetAsync(url) end)
    if success then
        local data = HttpService:JSONDecode(response)
        if data and data.success and data.item then
            local itemName = tostring(data.item)
            if validSeeds[itemName] then
                GivePlayerSeed(player, itemName)
            elseif validPets[itemName] then
                GivePlayerPet(player, itemName)
            end
            -- Optionally notify the player here!
        end
    end
end)
 
